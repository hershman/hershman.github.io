<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Multiplication Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Base style for all cells */
        .cell {
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            /* Prevent selecting text in non-editing cells */
            user-select: none;
        }
        /* Style for header cells */
        .cell.header {
            font-weight: 700;
            background-color: #f3f4f6; /* gray-100 */
            cursor: default;
        }
        /* Hover effect for unanswered cells */
        .cell:not(.header):not(.revealed):not(.editing):hover {
            background-color: #dbeafe; /* blue-100 */
            transform: scale(1.05);
        }
        /* Style for correctly answered cells */
        .cell.revealed {
            background-color: #a7f3d0; /* emerald-200 */
            color: #065f46; /* emerald-800 */
            cursor: default;
        }
        /* Style for cells being edited */
        .cell.editing {
            background-color: #e0e7ff; /* indigo-100 */
            cursor: text;
            outline: 2px solid #4f46e5; /* indigo-600 */
            user-select: text;
        }
        /* Style for the incorrect answer flash */
        .cell.incorrect {
            background-color: #fecaca; /* red-200 */
            animation: shake 0.5s;
        }

        /* Simple shake animation for incorrect answers */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-2xl mx-auto">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Multiplication Quiz</h1>
        <p class="text-center text-gray-600 mb-8">Click a square, type the answer, and press Enter.</p>

        <!-- Grid container for the multiplication table -->
        <div id="multiplication-grid" class="grid grid-cols-11 gap-2 p-4 bg-white rounded-lg shadow-lg">
            <!-- Headers and cells will be generated by JavaScript -->
        </div>
    </div>

    <script>
        const gridContainer = document.getElementById('multiplication-grid');
        let activeCell = null; // To keep track of the cell being edited

        // Function to check the answer and finalize the cell state
        const checkAnswer = (cell) => {
            if (!cell) return;
            
            const userAnswer = parseInt(cell.textContent);
            const correctAnswer = parseInt(cell.dataset.value);

            // Make the cell non-editable again
            cell.contentEditable = false;
            cell.classList.remove('editing');
            activeCell = null;

            if (userAnswer === correctAnswer) {
                // Correct answer
                cell.textContent = correctAnswer;
                cell.classList.add('revealed');
                cell.classList.remove('incorrect');
            } else {
                // Incorrect answer
                cell.textContent = ''; // Clear the wrong answer
                cell.classList.add('incorrect');
                setTimeout(() => {
                    cell.classList.remove('incorrect');
                }, 500);
            }
        };

        // Loop to create the 11x11 grid
        for (let i = 0; i <= 10; i++) {
            for (let j = 0; j <= 10; j++) {
                const cell = document.createElement('div');
                cell.classList.add('cell', 'border', 'rounded-md');

                if (i === 0 && j === 0) {
                    cell.classList.add('header');
                } else if (i === 0) {
                    cell.classList.add('header');
                    cell.textContent = j;
                } else if (j === 0) {
                    cell.classList.add('header');
                    cell.textContent = i;
                } else {
                    // These are the interactive quiz cells
                    cell.dataset.value = i * j;

                    cell.addEventListener('click', () => {
                        // Ignore clicks on already revealed or currently editing cells
                        if (cell.classList.contains('revealed') || cell === activeCell) {
                            return;
                        }

                        // If another cell is being edited, check its answer first
                        if (activeCell) {
                            checkAnswer(activeCell);
                        }

                        // Activate the new cell for editing
                        activeCell = cell;
                        cell.contentEditable = true;
                        cell.classList.add('editing');
                        cell.textContent = '';
                        cell.focus();
                    });

                    // Listen for "Enter" key to submit the answer
                    cell.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault(); // Prevents adding a new line
                            checkAnswer(cell);
                        }
                    });

                    // Listen for when the user clicks away (blur)
                    cell.addEventListener('blur', () => {
                        // Only check answer on blur if this is the active cell
                        if (cell === activeCell) {
                            checkAnswer(cell);
                        }
                    });
                }
                gridContainer.appendChild(cell);
            }
        }
    </script>

</body>
</html>
